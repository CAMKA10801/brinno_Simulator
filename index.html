<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>肯佳企業 - 穩定版模擬器</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-[#111] text-white">
    <div id="root"></div>

    <script type="text/babel">
        // 排除 undefined 錯誤：如果 React 沒載入，這裡會直接報錯並在控制台顯示
        const { useState, useMemo } = React;

        const App = () => {
            const [dist, setDist] = useState(5000);
            const [tilt, setTilt] = useState(0);
            const [model, setModel] = useState('TLC2020');

            // 簡單的投影計算
            const projHeight = useMemo(() => {
                // 模擬原本的公式邏輯，但極度簡化以確保不報錯
                const baseHeight = 50; 
                return baseHeight + (tilt * 0.5);
            }, [tilt]);

            return (
                <div className="p-8 max-w-4xl mx-auto font-sans">
                    <header className="border-b border-neutral-800 pb-4 mb-8">
                        <h1 className="text-2xl font-bold text-yellow-500">Brinno 視角模擬器 (穩定診斷版)</h1>
                        <p className="text-xs text-neutral-500 mt-2">如果您能看到這行字，代表 React 運作正常。</p>
                    </header>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                        {/* 左側控制 */}
                        <div className="bg-neutral-800 p-6 rounded-xl space-y-6">
                            <div>
                                <label className="block text-sm mb-2">機型切換</label>
                                <div className="flex gap-2">
                                    {['TLC2020', 'TLC300', 'BCC5000'].map(m => (
                                        <button key={m} onClick={() => setModel(m)} 
                                            className={`px-3 py-1 rounded text-xs ${model === m ? 'bg-yellow-600' : 'bg-neutral-700'}`}>
                                            {m}
                                        </button>
                                    ))}
                                </div>
                            </div>

                            <div>
                                <label className="block text-sm mb-2">拍攝距離: {dist}mm</label>
                                <input type="range" min="500" max="10000" value={dist} 
                                    onChange={(e) => setDist(parseInt(e.target.value))} className="w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-yellow-500" />
                            </div>

                            <div>
                                <label className="block text-sm mb-2">俯仰角度: {tilt}°</label>
                                <input type="range" min="-60" max="60" value={tilt} 
                                    onChange={(e) => setTilt(parseInt(e.target.value))} className="w-full h-2 bg-neutral-700 rounded-lg appearance-none cursor-pointer accent-white" />
                            </div>
                        </div>

                        {/* 右側預覽 */}
                        <div className="space-y-4">
                            <div className="bg-black aspect-video rounded-xl relative overflow-hidden border border-neutral-700">
                                {/* 地平線 */}
                                <div className="absolute w-full h-px bg-white/20" style={{ top: `${50 + tilt}%` }}></div>
                                {/* 模擬物體 */}
                                <div className="absolute left-1/2 -translate-x-1/2 bg-blue-500/80 transition-all"
                                     style={{ 
                                         top: `${40 + tilt}%`, 
                                         height: '20%', 
                                         width: '10%',
                                         opacity: dist > 8000 ? 0.3 : 0.8 
                                     }}>
                                </div>
                                <div className="absolute top-2 left-2 text-[10px] bg-black/50 p-1 rounded">PREVIEW: {model}</div>
                            </div>
                            <div className="text-[10px] text-neutral-500 bg-neutral-900 p-3 rounded border border-neutral-800">
                                診斷資訊：<br/>
                                Current Distance: {dist} mm<br/>
                                Current Tilt: {tilt} deg
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // 確保 DOM 載入後掛載
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
